<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Resume PDF Generator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 50px;
    }
    .btn {
        padding: 12px 25px;
        background-color: #6c63ff;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
    }
    .btn:hover {
        background-color: #5a54d1;
    }
</style>
</head>
<body>

    <button id="action-btn" class="btn">Generate PDF</button>

<script>
const btn = document.getElementById("action-btn");

btn.addEventListener("click", async () => {
    btn.disabled = true;
    btn.innerText = "Generating...";
    console.log("üì§ Requesting PDF from /generate-pdf");

    try {
        const res = await fetch("/generate-pdf"); // relative path
        console.log("üì• Response status:", res.status);

        if (!res.ok) throw new Error(`HTTP ${res.status}`);

        const blob = await res.blob();
        console.log("‚úÖ PDF Blob size:", blob.size);

        const url = URL.createObjectURL(blob);

        btn.innerText = "Download PDF";
        btn.disabled = false;
        btn.onclick = () => {
            console.log("‚¨áÔ∏è Downloading PDF...");
            const a = document.createElement("a");
            a.href = url;
            a.download = "resume.pdf";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        };
    } catch (err) {
        console.error("‚ùå Error generating PDF:", err);
        alert("Error generating PDF: " + err.message);
        btn.innerText = "Generate PDF";
        btn.disabled = false;
    }
});
</script>

</body>
</html>